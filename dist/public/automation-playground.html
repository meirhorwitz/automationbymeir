<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/svg+xml" href="/logos/favicon.svg">
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sxaf839npz");
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D8GQDGVR08"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-D8GQDGVR08');
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automation Puzzle - Build Your Perfect Workflow</title>
    <style>
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@200;400;600;700&display=swap');

        :root {
            --primary: #00e676;
            --primary-dark: #00c853;
            --secondary: #448aff;
            --dark: #0a0a0a;
            --dark-secondary: #1a1a1a;
            --dark-tertiary: #2a2a2a;
            --light: #ffffff;
            --text-primary: #e0e0e0;
            --text-secondary: #9e9e9e;
            --border-color: #333;
            --accent: #fbbc04;
            --danger: #ea4335;
            --gray: #5f6368;
            --nav-height: 0px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000;
            color: #f8f9fa;
            overflow: hidden;
            position: relative;
        }

        h1 {
            font-weight: 200;
        }

        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(51, 51, 51, 0.5);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            color: var(--light);
            font-size: 1.25rem;
            font-weight: 600;
            font-family: 'IBM Plex Sans', sans-serif;
        }

        .logo img {
            height:40px; width:auto;
            border-radius: 8px;
            padding: 8px;
        }

        .logo .by-meir {
            color: var(--text-secondary);
            font-weight: 400;
            font-size: 0.8em;
        }

        .nav-toggle {
            display: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2.5rem;
            align-items: center;
        }

        .nav-links li {
            position: relative;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--light);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .dropdown {
            display: none;
            flex-direction: column;
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            background: var(--dark-secondary);
            border: 1px solid var(--border-color);
            padding: 0.5rem 0;
            border-radius: 8px;
            min-width: 200px;
            z-index: 10;
        }

        .dropdown a {
            padding: 0.5rem 1.5rem;
            white-space: nowrap;
        }

        .dropdown a:hover {
            background: var(--dark-tertiary);
        }

        .dropdown.show {
            display: flex;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                right: 0;
                background: var(--dark);
                flex-direction: column;
                padding: 1rem 2rem;
                border: 1px solid var(--border-color);
            }

            .nav-links.show {
                display: flex;
            }

            .nav-links .dropdown {
                position: static;
                background: transparent;
                border: none;
                padding: 0;
            }

            .dropdown a {
                padding: 0.5rem 0;
            }

            .nav-toggle {
                display: block;
                background: none;
                border: none;
                color: var(--light);
                font-size: 1.5rem;
                cursor: pointer;
            }
        }

        /* Background Animation */

        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(66, 133, 244, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(66, 133, 244, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            z-index: -1;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Floating particles */

        .particle {
            position: absolute;
            background: radial-gradient(circle, rgba(66, 133, 244, 0.8), transparent);
            border-radius: 50%;
            pointer-events: none;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0;
            }
            10% { opacity: 0.4; }
            90% { opacity: 0.4; }
            50% { 
                transform: translateY(-100vh) translateX(100px) scale(1.5);
            }
        }

        /* Main Container */

        .container {
            display: flex;
            height: calc(100vh - 120px);
            position: relative;
            z-index: 1;
            margin-top: 120px;
        }

        /* Service Panel */

        .service-panel {
            width: 300px;
            background: rgba(32, 33, 36, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(66, 133, 244, 0.3);
            padding: 2rem;
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        .service-panel .panel-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .service-panel .panel-header svg {
            width: 2.5rem;
            height: 2.5rem;
        }

        .service-panel h2 {
            font-size: 1.5rem;
            background: linear-gradient(135deg, #4285F4 0%, #34A853 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Service Categories */

        .service-category {
            margin-bottom: 2rem;
        }

        .category-title {
            font-size: 0.875rem;
            color: #5f6368;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Service Items */

        .service-item {
            background: rgba(45, 45, 48, 0.8);
            border: 1px solid rgba(95, 99, 104, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: grab;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .service-item::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--service-color) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .service-item:hover {
            transform: translateY(-2px);
            border-color: var(--service-color);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }

        .service-item:hover::before {
            opacity: 0.1;
        }

        .service-item.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .service-icon {
            width: 40px;
            height: 40px;
            margin-bottom: 0.5rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .service-name {
            font-weight: 600;
            font-size: 0.9rem;
            color: #f8f9fa;
        }

        .service-desc {
            font-size: 0.75rem;
            color: #9aa0a6;
            margin-top: 0.25rem;
        }

        /* Canvas Area */

        .canvas-area {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .canvas {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Connection Lines */

        #connections {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Dropped Service */

        .dropped-service {
            position: absolute;
            background: rgba(32, 33, 36, 0.95);
            border: 2px solid var(--service-color);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: move;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            animation: dropIn 0.5s ease;
            z-index: 10;
        }

        @keyframes dropIn {
            0% {
                transform: scale(0.8) translateY(-20px);
                opacity: 0;
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .dropped-service:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6);
        }

        .dropped-service.selected {
            border-color: #FBBC04;
            box-shadow: 0 0 0 3px rgba(251, 188, 4, 0.3);
        }

        .dropped-service .remove-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #EA4335;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .dropped-service .remove-btn:hover {
            transform: scale(1.2);
            background: #ff5847;
        }

        /* Connection Points */

        .connection-point {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #4285F4;
            border: 2px solid #f8f9fa;
            border-radius: 50%;
            cursor: crosshair;
            transition: all 0.3s ease;
            z-index: 20;
        }

        .connection-point.input {
            left: -8px;
            top: 50%;
            transform: translateY(-50%);
            background: #34A853;
        }

        .connection-point.output {
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            background: #FBBC04;
        }

        .connection-point:hover {
            transform: translateY(-50%) scale(1.5);
            box-shadow: 0 0 0 4px rgba(66, 133, 244, 0.3);
        }

        /* Info Panel */

        .info-panel {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: rgba(32, 33, 36, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(66, 133, 244, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            max-width: 300px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .info-panel h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: #4285F4;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat {
            text-align: center;
            padding: 0.75rem;
            background: rgba(66, 133, 244, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(66, 133, 244, 0.2);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--stat-color);
        }

        .stat-label {
            font-size: 0.75rem;
            color: #9aa0a6;
            margin-top: 0.25rem;
        }

        /* Chat controls removed */

        /* Action Buttons */

        .action-buttons {
            position: fixed;
            top: calc(var(--nav-height) + 2rem);
            right: 2rem;
            display: flex;
            gap: 1rem;
            z-index: 1100;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--dark);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            color: var(--dark);
            transform: translateY(-2px);
        }

        /* Success Animation */

        .success-pulse {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(52, 168, 83, 0.8), transparent);
            animation: pulse 1s ease-out;
            pointer-events: none;
        }

        @keyframes pulse {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }

        /* Mobile Responsive */

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .service-panel {
                width: 100%;
                height: 40vh;
                border-right: none;
                border-bottom: 1px solid rgba(66, 133, 244, 0.3);
            }

            .canvas-area {
                height: 60vh;
            }

            .info-panel {
                position: static;
                margin: 1rem;
                max-width: none;
            }

            .action-buttons {
                position: fixed;
                bottom: 1rem;
                top: auto;
                left: 0;
                right: 0;
                justify-content: center;
            }
        }

        #header {
            position: fixed;
            width: 100%;
            z-index: 100;
            padding: 40px;
            padding-top: 40px;
            display: flex;
            justify-content: space-between;
            box-sizing: border-box;
            align-items: flex-start;
            top: 0;
            left: 0;
            height: 0;
        }

        #header img{
            height:40px; width:auto;
            backdrop-filter: blur(20px);
            padding: 8px 8px;
            border-radius: 8px;
        }

        nav {
            display:flex;
            flex-direction:row;
            align-items:flex-start;
            padding:24px;
            gap:40px;
            right:32px;
            top:32px;
            background:rgba(13,13,14,0.6);
            backdrop-filter:blur(16px);
            border-radius:8px;
            z-index:100;
            width:25%;
            min-width:min-content;
            flex-wrap:wrap;
            align-content:flex-start;
            justify-content:flex-start;
            box-sizing:border-box;
        }

        nav ul{
            list-style:none;
            padding:0;
            margin:0;
            display:flex;
            flex-direction:column;
            gap:8px;
            width:40%;
            flex-grow:1;
        }

        a{
            color:white;
            text-decoration:none;
        }

        nav a{
            font-size:20px;
            position:relative;
            display:inline-block;
            font-weight:300;
            white-space:nowrap;
        }

        nav a:after{
            content:'';
            display:block;
            width:100%;
            height:1px;
            background:#fff;
            transform:scaleX(0);
            transition:transform 0.2s ease-in-out;
            transform-origin:100% 0 ;
        }

        nav a:hover:after{
            transform:scaleX(1);
            transform-origin:0 0 ;
        }

        nav ul li { position: relative; }

        nav ul li .dropdown-menu {
            display:none;
            background:rgba(13,13,14,0.9);
            border-radius:8px;
            padding:8px 0;
            list-style:none;
            margin:0;
            min-width:220px;
        }

        nav ul li:hover .dropdown-menu { display:block; }

        nav ul li .dropdown-menu a {
            padding:8px 16px;
            display:block;
            font-size:16px;
            white-space:nowrap;
        }

        nav ul li .dropdown-menu a:hover { background:none; }

        #hero {
  margin-top: 40px !important; 
  padding-top: 80px !important; 
}

        #about .horizontal {
  display: flex;
  gap: 40px;
  align-items: flex-start;
}

        #about .horizontal > div:first-child {
  flex: 1;
}

        #about .stats {
  width: auto;
  max-width: 300px;
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 8px !important;
  flex-shrink: 0;
}

        #about .stats div {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding: 12px 20px;
  background: #333333;
  border-radius: 8px;
  font-size: clamp(1.5rem, 4vw, 2rem);
  white-space: nowrap;
  gap: 8px;
  flex: 1;
  min-width: 120px;
  margin-top: 0;
  box-sizing: border-box;
}

        #about .stats div p {
  margin: 0;
  font-size: clamp(0.875rem, 2vw, 1rem);
  color: #C4C4C4;
}

        .service-card, .project-card, .stat-card, .service-item, .dropped-service {
  overflow: hidden;
  word-wrap: break-word;
  box-sizing: border-box;
}

        .service-card *, .project-card *, .stat-card *, .service-item *, .dropped-service * {
  max-width: 100%;
  overflow-wrap: break-word;
}

        .menu-toggle {
  display: none;
  flex-direction: column;
  justify-content: space-between;
  width: 30px;
  height: 21px;
  cursor: pointer;
  background: rgba(13, 13, 14, 0.6);
  backdrop-filter: blur(16px);
  padding: 12px;
  border-radius: 8px;
  gap: 3px;
  position: fixed;
  top: 40px;
  right: 40px;
  z-index: 101;
}

        .menu-toggle span {
  display: block;
  height: 2px;
  background: #fff;
  border-radius: 2px;
  transition: all 0.3s ease;
}

        .menu-toggle.active span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

        .menu-toggle.active span:nth-child(2) {
  opacity: 0;
}

        .menu-toggle.active span:nth-child(3) {
  transform: rotate(-45deg) translate(5px, -5px);
}

        @media (max-width: 768px) {
  #header {
    padding: 16px !important;
    background: rgba(30, 30, 33, 0.95);
    backdrop-filter: blur(10px);
  }

  #header img {
    height: 32px !important;
    padding: 6px !important;
  }

  .menu-toggle {
    display: flex !important;
    top: 16px;
    right: 16px;
  }

  nav {
    display: none !important;
    position: fixed !important;
    top: 70px !important;
    left: 16px !important;
    right: 16px !important;
    width: auto !important;
    max-height: calc(100vh - 100px) !important;
    background: rgba(13, 13, 14, 0.95) !important;
    padding: 24px !important;
    flex-direction: column !important;
    overflow-y: auto !important;
    z-index: 99 !important;
  }

  nav.open {
    display: flex !important;
  }

  #hero {
    min-height: 80vh;
    padding: 40px 20px 40px;
    margin-top: 60px !important;
  }

  #about .horizontal {
    flex-direction: column !important;
  }

  #about .stats {
    width: 100% !important;
    max-width: none !important;
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 12px !important;
    margin-top: 24px !important;
  }

  #about .stats div {
    width: 100% !important;
    min-width: auto !important;
    padding: 10px 16px !important;
  }

  #profile_image {
    width: 100% !important;
    max-width: none !important;
  }
}

        #header {
  z-index: 100;
}

        nav {
  z-index: 100;
}

        .menu-toggle {
  z-index: 101;
}
</style>


</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PZ9XZMFL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="header">
      <a href="index.html"><img src="/assets/ma_logo-BWq00-lR.svg" alt="Automations by Meir" width="196" height="64" /></a>
      <nav>
        <ul>
          <li><a href="index.html#services">Services</a></li>
          <li><a href="index.html#projects">Projects</a></li>
          <li class="dropdown"><a href="#">Showcases</a>
            <ul class="dropdown-menu">
              <li><a href="showcase1.html">Crypto Wallet Tracker</a></li>
              <li><a href="showcase2.html">Business Analytics System</a></li>
              <li><a href="showcase-job-post-pro.html">Job Post Pro</a></li>
            </ul>
          </li>
          <li><a href="why-automation.html">Why Automate</a></li>
          <li><a href="index.html#contact">Contact Us</a></li>
        </ul>
        <ul>
          <li><a href="automation-playground.html">Try live</a></li>
          <li><a href="payment.html">Payments</a></li>
        </ul>
      </nav>
    </div>
    <div class="bg-grid"></div>
    
    <!-- Floating Particles -->
    <div id="particles"></div>
    
    <div class="container">
        <!-- Service Panel -->
        <div class="service-panel">
            <div class="panel-header">
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M40 48H8C5.79086 48 4 46.2091 4 44V4C4 1.79086 5.79086 0 8 0H30L44 14V44C44 46.2091 42.2091 48 40 48Z" fill="#2D2D30"/><path d="M30 0L44 14H34C31.7909 14 30 12.2091 30 10V0Z" fill="#424242"/><path d="M22 26L18 30L22 34" stroke="#4285F4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 26L34 30L30 34" stroke="#34A853" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M20 40L24 36L28 40" stroke="#FBBC04" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <h2>Service Blocks</h2>
            </div>
            
            <div class="service-category">
                <div class="category-title">Google Services</div>
                <div class="service-item" draggable="true" data-service="sheets" style="--service-color: #34A853;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eGoogle%20Sheets%3c/title%3e%3cpath%20fill='%230F9D58'%20d='M11.318%2012.545H7.91v-1.909h3.41v1.91zM14.728%200v6h6l-6-6zm1.363%2010.636h-3.41v1.91h3.41v-1.91zm0%203.273h-3.41v1.91h3.41v-1.91zM20.727%206.5v15.864c0%20.904-.732%201.636-1.636%201.636H4.909a1.636%201.636%200%200%201-1.636-1.636V1.636C3.273.732%204.005%200%204.909%200h9.318v6.5h6.5zm-3.273%202.773H6.545v7.909h10.91v-7.91zm-6.136%204.636H7.91v1.91h3.41v-1.91z'/%3e%3c/svg%3e" class="service-icon" alt="Google Sheets logo" />
                    <div class="service-name">Google Sheets</div>
                    <div class="service-desc">Spreadsheet automation</div>
                </div>

                <div class="service-item" draggable="true" data-service="gmail" style="--service-color: #EA4335;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eGmail%3c/title%3e%3cpath%20fill='%23EA4335'%20d='M24%205.457v13.909c0%20.904-.732%201.636-1.636%201.636h-3.819V11.73L12%2016.64l-6.545-4.91v9.273H1.636A1.636%201.636%200%200%201%200%2019.366V5.457c0-2.023%202.309-3.178%203.927-1.964L5.455%204.64%2012%209.548l6.545-4.91%201.528-1.145C21.69%202.28%2024%203.434%2024%205.457z'/%3e%3c/svg%3e" class="service-icon" alt="Gmail logo" />
                    <div class="service-name">Gmail</div>
                    <div class="service-desc">Email automation</div>
                </div>

                <div class="service-item" draggable="true" data-service="drive" style="--service-color: #FBBC04;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eGoogle%20Drive%3c/title%3e%3cpath%20fill='%234285F4'%20d='M12.01%201.485c-2.082%200-3.754.02-3.743.047.01.02%201.708%203.001%203.774%206.62l3.76%206.574h3.76c2.081%200%203.753-.02%203.742-.047-.005-.02-1.708-3.001-3.775-6.62l-3.76-6.574zm-4.76%201.73a789.828%20789.861%200%200%200-3.63%206.319L0%2015.868l1.89%203.298%201.885%203.297%203.62-6.335%203.618-6.33-1.88-3.287C8.104%204.704%207.255%203.22%207.25%203.214zm2.259%2012.653-.203.348c-.114.198-.96%201.672-1.88%203.287a423.93%20423.948%200%200%201-1.698%202.97c-.01.026%203.24.047%207.222.047h7.244l1.796-3.157c.992-1.734%201.85-3.23%201.906-3.323l.104-.167h-7.249z'/%3e%3c/svg%3e" class="service-icon" alt="Google Drive logo" />
                    <div class="service-name">Google Drive</div>
                    <div class="service-desc">File management</div>
                </div>

                <div class="service-item" draggable="true" data-service="calendar" style="--service-color: #4285F4;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eGoogle%20Calendar%3c/title%3e%3cpath%20fill='%234285F4'%20d='M18.316%205.684H24v12.632h-5.684V5.684zM5.684%2024h12.632v-5.684H5.684V24zM18.316%205.684V0H1.895A1.894%201.894%200%200%200%200%201.895v16.421h5.684V5.684h12.632zm-7.207%206.25v-.065c.272-.144.5-.349.687-.617s.279-.595.279-.982c0-.379-.099-.72-.3-1.025a2.05%202.05%200%200%200-.832-.714%202.703%202.703%200%200%200-1.197-.257c-.6%200-1.094.156-1.481.467-.386.311-.65.671-.793%201.078l1.085.452c.086-.249.224-.461.413-.633.189-.172.445-.257.767-.257.33%200%20.602.088.816.264a.86.86%200%200%201%20.322.703c0%20.33-.12.589-.36.778-.24.19-.535.284-.886.284h-.567v1.085h.633c.407%200%20.748.109%201.02.327.272.218.407.499.407.843%200%20.336-.129.614-.387.832s-.565.327-.924.327c-.351%200-.651-.103-.897-.311-.248-.208-.422-.502-.521-.881l-1.096.452c.178.616.505%201.082.977%201.401.472.319.984.478%201.538.477a2.84%202.84%200%200%200%201.293-.291c.382-.193.684-.458.902-.794.218-.336.327-.72.327-1.149%200-.429-.115-.797-.344-1.105a2.067%202.067%200%200%200-.881-.689zm2.093-1.931l.602.913L15%2010.045v5.744h1.187V8.446h-.827l-2.158%201.557zM22.105%200h-3.289v5.184H24V1.895A1.894%201.894%200%200%200%2022.105%200zm-3.289%2023.5l4.684-4.684h-4.684V23.5zM0%2022.105C0%2023.152.848%2024%201.895%2024h3.289v-5.184H0v3.289z'/%3e%3c/svg%3e" class="service-icon" alt="Google Calendar logo" />
                    <div class="service-name">Google Calendar</div>
                    <div class="service-desc">Schedule automation</div>
                </div>
            </div>

            <div class="service-category">
                <div class="category-title">AI Services</div>
                <div class="service-item" draggable="true" data-service="openai" style="--service-color: #10a37f;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eOpenAI%3c/title%3e%3cpath%20fill='%2310A37F'%20d='M22.2819%209.8211a5.9847%205.9847%200%200%200-.5157-4.9108%206.0462%206.0462%200%200%200-6.5098-2.9A6.0651%206.0651%200%200%200%204.9807%204.1818a5.9847%205.9847%200%200%200-3.9977%202.9%206.0462%206.0462%200%200%200%20.7427%207.0966%205.98%205.98%200%200%200%20.511%204.9107%206.051%206.051%200%200%200%206.5146%202.9001A5.9847%205.9847%200%200%200%2013.2599%2024a6.0557%206.0557%200%200%200%205.7718-4.2058%205.9894%205.9894%200%200%200%203.9977-2.9001%206.0557%206.0557%200%200%200-.7475-7.0729zm-9.022%2012.6081a4.4755%204.4755%200%200%201-2.8764-1.0408l.1419-.0804%204.7783-2.7582a.7948.7948%200%200%200%20.3927-.6813v-6.7369l2.02%201.1686a.071.071%200%200%201%20.038.052v5.5826a4.504%204.504%200%200%201-4.4945%204.4944zm-9.6607-4.1254a4.4708%204.4708%200%200%201-.5346-3.0137l.142.0852%204.783%202.7582a.7712.7712%200%200%200%20.7806%200l5.8428-3.3685v2.3324a.0804.0804%200%200%201-.0332.0615L9.74%2019.9502a4.4992%204.4992%200%200%201-6.1408-1.6464zM2.3408%207.8956a4.485%204.485%200%200%201%202.3655-1.9728V11.6a.7664.7664%200%200%200%20.3879.6765l5.8144%203.3543-2.0201%201.1685a.0757.0757%200%200%201-.071%200l-4.8303-2.7865A4.504%204.504%200%200%201%202.3408%207.872zm16.5963%203.8558L13.1038%208.364%2015.1192%207.2a.0757.0757%200%200%201%20.071%200l4.8303%202.7913a4.4944%204.4944%200%200%201-.6765%208.1042v-5.6772a.79.79%200%200%200-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759%200%200%200-.7854%200L9.409%209.2297V6.8974a.0662.0662%200%200%201%20.0284-.0615l4.8303-2.7866a4.4992%204.4992%200%200%201%206.6802%204.66zM8.3065%2012.863l-2.02-1.1638a.0804.0804%200%200%201-.038-.0567V6.0742a4.4992%204.4992%200%200%201%207.3757-3.4537l-.142.0805L8.704%205.459a.7948.7948%200%200%200-.3927.6813zm1.0976-2.3654l2.602-1.4998%202.6069%201.4998v2.9994l-2.5974%201.4997-2.6067-1.4997Z'/%3e%3c/svg%3e" class="service-icon" alt="OpenAI logo" />
                    <div class="service-name">OpenAI GPT</div>
                    <div class="service-desc">AI text generation</div>
                </div>

                <div class="service-item" draggable="true" data-service="claude" style="--service-color: #6366f1;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eClaude%3c/title%3e%3cpath%20fill='%23FF4F00'%20d='m4.7144%2015.9555%204.7174-2.6471.079-.2307-.079-.1275h-.2307l-.7893-.0486-2.6956-.0729-2.3375-.0971-2.2646-.1214-.5707-.1215-.5343-.7042.0546-.3522.4797-.3218.686.0608%201.5179.1032%202.2767.1578%201.6514.0972%202.4468.255h.3886l.0546-.1579-.1336-.0971-.1032-.0972L6.973%209.8356l-2.55-1.6879-1.3356-.9714-.7225-.4918-.3643-.4614-.1578-1.0078.6557-.7225.8803.0607.2246.0607.8925.686%201.9064%201.4754%202.4893%201.8336.3643.3035.1457-.1032.0182-.0728-.164-.2733-1.3539-2.4467-1.445-2.4893-.6435-1.032-.17-.6194c-.0607-.255-.1032-.4674-.1032-.7285L6.287.1335%206.6997%200l.9957.1336.419.3642.6192%201.4147%201.0018%202.2282%201.5543%203.0296.4553.8985.2429.8318.091.255h.1579v-.1457l.1275-1.706.2368-2.0947.2307-2.6957.0789-.7589.3764-.9107.7468-.4918.5828.2793.4797.686-.0668.4433-.2853%201.8517-.5586%202.9021-.3643%201.9429h.2125l.2429-.2429.9835-1.3053%201.6514-2.0643.7286-.8196.85-.9046.5464-.4311h1.0321l.759%201.1293-.34%201.1657-1.0625%201.3478-.8804%201.1414-1.2628%201.7-.7893%201.36.0729.1093.1882-.0183%202.8535-.607%201.5421-.2794%201.8396-.3157.8318.3886.091.3946-.3278.8075-1.967.4857-2.3072.4614-3.4364.8136-.0425.0304.0486.0607%201.5482.1457.6618.0364h1.621l3.0175.2247.7892.522.4736.6376-.079.4857-1.2142.6193-1.6393-.3886-3.825-.9107-1.3113-.3279h-.1822v.1093l1.0929%201.0686%202.0035%201.8092%202.5075%202.3314.1275.5768-.3218.4554-.34-.0486-2.2039-1.6575-.85-.7468-1.9246-1.621h-.1275v.17l.4432.6496%202.3436%203.5214.1214%201.0807-.17.3521-.6071.2125-.6679-.1214-1.3721-1.9246L14.38%2017.959l-1.1414-1.9428-.1397.079-.674%207.2552-.3156.3703-.7286.2793-.6071-.4614-.3218-.7468.3218-1.4753.3886-1.9246.3157-1.53.2853-1.9004.17-.6314-.0121-.0425-.1397.0182-1.4328%201.9672-2.1796%202.9446-1.7243%201.8456-.4128.164-.7164-.3704.0667-.6618.4008-.5889%202.386-3.0357%201.4389-1.882.929-1.0868-.0062-.1579h-.0546l-6.3385%204.1164-1.1293.1457-.4857-.4554.0608-.7467.2307-.2429%201.9064-1.3114Z'/%3e%3c/svg%3e" class="service-icon" alt="Claude AI logo" />
                    <div class="service-name">Claude AI</div>
                    <div class="service-desc">Advanced reasoning</div>
                </div>

                <div class="service-item" draggable="true" data-service="gemini" style="--service-color: #8e44ad;">
                    <img src="data:image/svg+xml,%3csvg%20role='img'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3eGoogle%20Gemini%3c/title%3e%3cpath%20fill='%234285F4'%20d='M11.04%2019.32Q12%2021.51%2012%2024q0-2.49.93-4.68.96-2.19%202.58-3.81t3.81-2.55Q21.51%2012%2024%2012q-2.49%200-4.68-.93a12.3%2012.3%200%200%201-3.81-2.58%2012.3%2012.3%200%200%201-2.58-3.81Q12%202.49%2012%200q0%202.49-.96%204.68-.93%202.19-2.55%203.81a12.3%2012.3%200%200%201-3.81%202.58Q2.49%2012%200%2012q2.49%200%204.68.96%202.19.93%203.81%202.55t2.55%203.81'/%3e%3c/svg%3e" class="service-icon" alt="Google Gemini logo" />
                    <div class="service-name">Google Gemini</div>
                    <div class="service-desc">Multimodal AI</div>
                </div>
            </div>

            <div class="service-category">
                <div class="category-title">Integration Tools</div>
                <div class="service-item" draggable="true" data-service="webhook" style="--service-color: #e74c3c;">
                    <img src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%3e%3crect%20width='48'%20height='48'%20rx='8'%20fill='%23e74c3c'/%3e%3cpath%20d='M16%2024h16M24%2016v16'%20stroke='%23fff'%20stroke-width='3'/%3e%3c/svg%3e" class="service-icon" alt="Webhook logo" />
                    <div class="service-name">Webhook</div>
                    <div class="service-desc">HTTP triggers</div>
                </div>

                <div class="service-item" draggable="true" data-service="firebase" style="--service-color: #ff9800;">
                    <img src="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='256px'%20height='322px'%20viewBox='0%200%20256%20322'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20preserveAspectRatio='xMidYMid'%3e%3ctitle%3eFirebase%3c/title%3e%3cg%3e%3cpath%20d='M80.1808323,312.295406%20C93.6347594,317.709494%20108.230746,320.923389%20123.556401,321.458215%20C144.297625,322.182288%20164.021033,317.893803%20181.653847,309.747987%20C160.509281,301.440899%20141.3597,289.292936%20125.016395,274.187794%20C114.42239,291.15084%2098.7532944,304.547829%2080.1808323,312.295406%20Z'%20fill='%23FF9100'%3e%3c/path%3e%3cpath%20d='M125.013433,274.192731%20C87.706415,239.689026%2065.0743742,189.749411%2066.9870778,134.974635%20C67.0492822,133.195885%2067.1430825,131.418287%2067.2528453,129.641182%20C60.5713009,127.913117%2053.5958488,126.858604%2046.4173273,126.607977%20C36.142079,126.249067%2026.1913468,127.523435%2016.7969986,130.168933%20C6.83803832,147.614145%200.828169967,167.630638%200.0794789059,189.06977%20C-1.85272527,244.402081%2031.6316004,292.748737%2080.1778702,312.300343%20C98.7503322,304.552766%20114.418934,291.170588%20125.013433,274.192731%20Z'%20fill='%23FFC400'%3e%3c/path%3e%3cpath%20d='M125.014914,274.191086%20C133.688645,260.310285%20138.947716,244.036753%20139.559886,226.504323%20C141.170454,180.38419%20110.16583,140.710278%2067.2544909,129.639372%20C67.1447281,131.416477%2067.0507632,133.194075%2066.9887234,134.972825%20C65.0758552,189.747765%2087.7078961,239.687381%20125.014914,274.191086%20Z'%20fill='%23FF9100'%3e%3c/path%3e%3cpath%20d='M134.761095,0%20C110.321506,19.5791862%2091.0226675,45.3959945%2079.3465032,75.1362889%20C72.6616676,92.1712486%2068.4608946,110.46955%2067.2344144,129.650727%20C110.145918,140.721632%20141.150542,180.395709%20139.539974,226.515842%20C138.927639,244.048273%20133.653264,260.305348%20124.995002,274.202605%20C141.337814,289.322557%20160.487888,301.45571%20181.632454,309.762797%20C224.072981,290.145367%20254.184527,247.930289%20255.928884,197.998901%20C257.057779,165.647667%20244.628415,136.815425%20227.064718,112.478029%20C208.51694,86.738894%20134.761095,0%20134.761095,0%20Z'%20fill='%23DD2C00'%3e%3c/path%3e%3c/g%3e%3c/svg%3e" class="service-icon" alt="Firebase logo" />
                    <div class="service-name">Firebase</div>
                    <div class="service-desc">Real-time database</div>
                </div>
            </div>
        </div>
        
        <!-- Canvas Area -->
        <div class="canvas-area">
            <svg id="connections"></svg>
            <div class="canvas" id="canvas"></div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="btn btn-secondary" onclick="window.location.href='index.html'">Home</button>
        <button class="btn btn-secondary" onclick="clearCanvas()">Clear All</button>
        <button class="btn btn-primary" onclick="runAutomation()">Run Automation</button>
    </div>
    
    <!-- Info Panel -->
    <div class="info-panel">
        <h3>Your Automation</h3>
        <p style="color: #9aa0a6; font-size: 0.875rem;">Drag services to the canvas and connect them to build your workflow.</p>
        <div class="stats">
            <div class="stat" style="--stat-color: #4285F4;">
                <div class="stat-value" id="serviceCount">0</div>
                <div class="stat-label">Services</div>
            </div>
            <div class="stat" style="--stat-color: #34A853;">
                <div class="stat-value" id="connectionCount">0</div>
                <div class="stat-label">Connections</div>
            </div>
        </div>
    </div>

    <script>
        // --- Global variables ---
        let droppedServices = [];
        let connections = [];
        let currentConnection = null;
        let serviceIdCounter = 0;

        // --- Initialization ---
        function createParticles() {
            const particleContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = Math.random() * 6 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                particleContainer.appendChild(particle);
            }
        }

        // --- Drag and Drop functionality ---
        document.querySelectorAll('.service-item').forEach(item => {
            item.addEventListener('dragstart', handleDragStart);
            item.addEventListener('dragend', handleDragEnd);
        });

        const canvas = document.getElementById('canvas');
        canvas.addEventListener('dragover', handleDragOver);
        canvas.addEventListener('drop', handleDrop);


        function handleDragStart(e) {
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'copy';
            e.dataTransfer.setData('service', e.target.dataset.service);
            e.dataTransfer.setData('color', e.target.style.getPropertyValue('--service-color'));
            e.dataTransfer.setData('name', e.target.querySelector('.service-name').textContent);
            e.dataTransfer.setData('icon', e.target.querySelector('.service-icon').outerHTML);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'copy';
        }

        function handleDrop(e) {
            e.preventDefault();
            
            const service = e.dataTransfer.getData('service');
            const color = e.dataTransfer.getData('color');
            const name = e.dataTransfer.getData('name');
            const icon = e.dataTransfer.getData('icon');
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left - 75; // Adjust for element width
            const y = e.clientY - rect.top - 50;  // Adjust for element height
            
            createDroppedService(service, color, name, icon, x, y);
        }

        function createDroppedService(service, color, name, icon, x, y) {
            const id = 'service-' + serviceIdCounter++;
            const div = document.createElement('div');
            div.className = 'dropped-service';
            div.id = id;
            div.style.left = x + 'px';
            div.style.top = y + 'px';
            div.style.setProperty('--service-color', color);
            
            div.innerHTML = `
                ${icon}
                <div class="service-name">${name}</div>
                <button class="remove-btn" onclick="removeService('${id}')">Ã—</button>
                <div class="connection-point input" data-service="${id}" data-type="input"></div>
                <div class="connection-point output" data-service="${id}" data-type="output"></div>
            `;
            
            canvas.appendChild(div);
            
            makeDraggable(div);
            
            div.querySelectorAll('.connection-point').forEach(point => {
                point.addEventListener('click', handleConnectionClick);
            });
            
            droppedServices.push({ id, service, name, color, x, y });
            
            updateStats();
            
            createSuccessAnimation(x + 75, y + 50);
        }

        function makeDraggable(element) {
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            let xOffset = 0;
            let yOffset = 0;

            element.addEventListener('mousedown', dragStart);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', dragEnd);

            function dragStart(e) {
                if (e.target.classList.contains('connection-point') || 
                    e.target.classList.contains('remove-btn')) {
                    return;
                }
                
                const transform = window.getComputedStyle(element).transform;
                if (transform && transform !== 'none') {
                    const matrix = new DOMMatrix(transform);
                    xOffset = matrix.m41;
                    yOffset = matrix.m42;
                } else {
                    xOffset = 0;
                    yOffset = 0;
                }
                
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;

                if (e.target === element || element.contains(e.target)) {
                    isDragging = true;
                }
            }

            function drag(e) {
                if (isDragging) {
                    e.preventDefault();
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;

                    element.style.transform = `translate(${currentX}px, ${currentY}px)`;
                    
                    updateConnections();
                }
            }

            function dragEnd(e) {
                if (isDragging) {
                    const service = droppedServices.find(s => s.id === element.id);
                    if (service) {
                        const transform = window.getComputedStyle(element).transform;
                        if (transform && transform !== 'none') {
                           const matrix = new DOMMatrix(transform);
                           service.x = element.offsetLeft + matrix.m41;
                           service.y = element.offsetTop + matrix.m42;
                        }
                    }
                }
                isDragging = false;
            }
        }

        function handleConnectionClick(e) {
            const point = e.target;
            const serviceId = point.dataset.service;
            const type = point.dataset.type;
            
            if (!currentConnection) {
                // Start a new connection
                if (type === 'output') {
                    currentConnection = {
                        from: serviceId,
                        element: point
                    };
                    point.style.transform = 'translateY(-50%) scale(2)';
                }
            } else {
                // Complete the connection
                if (currentConnection.from !== serviceId && type === 'input') {
                    const connection = {
                        from: currentConnection.from,
                        to: serviceId,
                        id: 'connection-' + connections.length
                    };
                    
                    connections.push(connection);
                    drawConnections();
                    updateStats();
                }
                
                // Reset
                currentConnection.element.style.transform = 'translateY(-50%) scale(1)';
                currentConnection = null;
            }
        }

        function drawConnections() {
            const svg = document.getElementById('connections');
            svg.innerHTML = ''; // Clear existing lines
            connections.forEach(connection => {
                const fromElement = document.getElementById(connection.from);
                const toElement = document.getElementById(connection.to);
                
                if (!fromElement || !toElement) return;
                
                const fromPoint = fromElement.querySelector('.connection-point.output');
                const toPoint = toElement.querySelector('.connection-point.input');
                
                const fromRect = fromPoint.getBoundingClientRect();
                const toRect = toPoint.getBoundingClientRect();
                const svgRect = svg.getBoundingClientRect();
                
                const x1 = fromRect.left - svgRect.left + fromRect.width / 2;
                const y1 = fromRect.top - svgRect.top + fromRect.height / 2;
                const x2 = toRect.left - svgRect.left + toRect.width / 2;
                const y2 = toRect.top - svgRect.top + toRect.height / 2;
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                const d = `M ${x1} ${y1} C ${x1 + 100} ${y1}, ${x2 - 100} ${y2}, ${x2} ${y2}`;
                
                path.setAttribute('d', d);
                path.setAttribute('id', connection.id);
                path.setAttribute('stroke', '#4285F4');
                path.setAttribute('stroke-width', '3');
                path.setAttribute('fill', 'none');
                path.style.filter = 'drop-shadow(0 0 6px rgba(66, 133, 244, 0.6))';
                
                // Animate the path
                const length = path.getTotalLength();
                path.style.strokeDasharray = length;
                path.style.strokeDashoffset = length;
                path.style.animation = 'drawPath 0.5s ease forwards';
                
                svg.appendChild(path);
            });
        }

        function updateConnections() {
            drawConnections();
        }

        function removeService(id) {
            const element = document.getElementById(id);
            if (element) {
                element.remove();
                droppedServices = droppedServices.filter(s => s.id !== id);
                connections = connections.filter(c => c.from !== id && c.to !== id);
                updateConnections();
                updateStats();
            }
        }

        function clearCanvas() {
            document.querySelectorAll('.dropped-service').forEach(el => el.remove());
            droppedServices = [];
            connections = [];
            updateConnections();
            updateStats();
        }

        function updateStats() {
            document.getElementById('serviceCount').textContent = droppedServices.length;
            document.getElementById('connectionCount').textContent = connections.length;
        }

        function createSuccessAnimation(x, y) {
            const pulse = document.createElement('div');
            pulse.className = 'success-pulse';
            pulse.style.left = (x - 150) + 'px';
            pulse.style.top = (y - 150) + 'px';
            canvas.appendChild(pulse);
            
            setTimeout(() => pulse.remove(), 1000);
        }

        function runAutomation() {
            if (droppedServices.length === 0) {
                 showCompletionMessage('Build a Workflow!', 'error');
                return;
            }
            
            const runBtn = document.querySelector('.action-buttons .btn-primary');
            runBtn.disabled = true;
            runBtn.textContent = 'Running...';
            
            const flow = createAutomationFlow();
            
            executeFlow(flow, () => {
                runBtn.disabled = false;
                runBtn.textContent = 'Run Automation';
                showCompletionMessage('Automation Complete! ðŸŽ‰', 'success');
            });
        }
        
        function createAutomationFlow() {
            const flow = [];
            const processed = new Set();
            
            const startNodes = droppedServices.filter(service => 
                !connections.some(conn => conn.to === service.id)
            );
            
            startNodes.forEach(startNode => {
                const path = buildPath(startNode.id, processed);
                if (path.length > 0) {
                    flow.push(path);
                }
            });
            
            return flow;
        }
        
        function buildPath(nodeId, processed) {
            if (processed.has(nodeId)) return [];
            
            const path = [nodeId];
            processed.add(nodeId);
            
            const outgoing = connections.filter(conn => conn.from === nodeId);
            outgoing.forEach(conn => {
                const nextPath = buildPath(conn.to, processed);
                path.push(...nextPath);
            });
            
            return path;
        }
        
        async function executeFlow(flow, callback) {
            for (const path of flow) {
                for (let i = 0; i < path.length - 1; i++) {
                    const fromId = path[i];
                    const toId = path[i + 1];
                    const connection = connections.find(c => c.from === fromId && c.to === toId);
                    
                    if (connection) {
                        await animateDataTransfer(fromId, toId, connection.id);
                    }
                }
            }
            
            setTimeout(callback, 500);
        }
        
        async function animateDataTransfer(fromId, toId, connectionId) {
            const fromService = droppedServices.find(s => s.id === fromId);
            const toService = droppedServices.find(s => s.id === toId);
            
            if (!fromService || !toService) return;
            
            const path = document.getElementById(connectionId);
            if (path) {
                path.style.stroke = '#34A853';
                path.style.strokeWidth = '4';
                path.style.filter = 'drop-shadow(0 0 10px rgba(52, 168, 83, 0.8))';
            }
            
            const dataViz = createDataVisualization(fromService, toService);
            
            await animateData(fromId, toId, dataViz);
            
            if (path) {
                path.style.stroke = '#4285F4';
                path.style.strokeWidth = '3';
                path.style.filter = 'drop-shadow(0 0 6px rgba(66, 133, 244, 0.6))';
            }
        }
        
        function createDataVisualization(fromService, toService) {
            const visualizations = {
                'sheets-gmail': { particleIcon: 'âœ‰ï¸', description: 'Sending spreadsheet data as emails' },
                'gmail-calendar': { particleIcon: 'ðŸ“…', description: 'Creating calendar events from emails' },
                'sheets-calendar': { particleIcon: 'ðŸ“…', description: 'Scheduling events from spreadsheet data' },
                'openai-gmail': { particleIcon: 'âœ‰ï¸', description: 'AI composing personalized emails' },
                'openai-sheets': { particleIcon: 'ðŸ“Š', description: 'AI analyzing and updating spreadsheet' },
                'claude-gmail': { particleIcon: 'âœ‰ï¸', description: 'AI composing personalized emails' },
                'gemini-gmail': { particleIcon: 'âœ‰ï¸', description: 'AI composing personalized emails' },
                'drive-openai': { particleIcon: 'ðŸ“„', description: 'AI processing documents from Drive' },
                'sheets-openai': { particleIcon: 'ðŸ¤–', description: 'AI analyzing spreadsheet data' },
                'webhook-firebase': { particleIcon: 'ðŸ”¥', description: 'Storing webhook data in Firebase' },
                'firebase-gmail': { particleIcon: 'âœ‰ï¸', description: 'Sending emails based on database changes' }
            };
            
            const key = `${fromService.service}-${toService.service}`;
            return visualizations[key] || { particleIcon: 'ðŸ“¦', description: 'Processing data' };
        }
        
        function animateData(fromId, toId, visualization) {
            const fromElement = document.getElementById(fromId);
            const toElement = document.getElementById(toId);
            
            if (!fromElement || !toElement) return Promise.resolve();
            
            const fromRect = fromElement.getBoundingClientRect();
            const toRect = toElement.getBoundingClientRect();
            const canvasRect = canvas.getBoundingClientRect();
            
            const fromService = droppedServices.find(s => s.id === fromId);
            const isLLMInvolved = fromService && ['openai', 'claude', 'gemini'].includes(fromService.service);
            
            if (isLLMInvolved) {
                return new Promise(resolve => {
                    showChatAnimation(fromRect, canvasRect, visualization, () => {
                        animateDataFlow(fromRect, toRect, canvasRect, visualization).then(resolve);
                    });
                });
            } else {
                return animateDataFlow(fromRect, toRect, canvasRect, visualization);
            }
        }
        
        function showChatAnimation(serviceRect, canvasRect, visualization, callback) {
            const chatWidth = 350;
            const chatHeight = 450;
            
            let leftPos = serviceRect.left - canvasRect.left + serviceRect.width / 2;
            let topPos = serviceRect.top - canvasRect.top + serviceRect.height / 2;
            
            const minLeft = chatWidth / 2 + 20;
            const maxLeft = canvasRect.width - chatWidth / 2 - 20;
            const minTop = chatHeight / 2 + 20;
            const maxTop = canvasRect.height - chatHeight / 2 - 20;
            
            leftPos = Math.max(minLeft, Math.min(leftPos, maxLeft));
            topPos = Math.max(minTop, Math.min(topPos, maxTop));
            
            const chatWindow = document.createElement('div');
            chatWindow.style.cssText = `
                position: absolute; left: ${leftPos}px; top: ${topPos}px;
                transform: translate(-50%, -50%) scale(0); width: ${chatWidth}px; height: ${chatHeight}px;
                background: rgba(32, 33, 36, 0.98); border: 2px solid rgba(66, 133, 244, 0.5);
                border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
                z-index: 2000; overflow: hidden;
                transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            `;
            
            const chatHeader = document.createElement('div');
            chatHeader.style.cssText = `
                background: linear-gradient(135deg, #4285F4 0%, #34A853 100%); padding: 1rem; color: white;
                font-family: 'IBM Plex Sans', Arial, sans-serif; font-weight: 600; font-size: 1.1rem;
                display: flex; align-items: center; gap: 0.5rem;
            `;
            chatHeader.innerHTML = `<span style="font-size: 1.5rem;">ðŸ¤–</span><span>AI Assistant</span>`;
            
            const chatBody = document.createElement('div');
            chatBody.style.cssText = `
                padding: 1.5rem; height: calc(100% - 60px); display: flex;
                flex-direction: column; gap: 1rem;
            `;
            
            const messagesContainer = document.createElement('div');
            messagesContainer.style.cssText = `
                flex: 1; overflow-y: auto; display: flex;
                flex-direction: column; gap: 1rem;
            `;
            
            const inputArea = document.createElement('div');
            inputArea.style.cssText = `
                display: flex; gap: 0.5rem; align-items: center;
                background: rgba(45, 45, 48, 0.8); border-radius: 25px;
                padding: 0.5rem 1rem; border: 1px solid rgba(66, 133, 244, 0.3);
            `;
            
            const input = document.createElement('div');
            input.style.cssText = `
                flex: 1; color: #cbd5e1; font-family: 'IBM Plex Sans', Arial, sans-serif; font-size: 0.9rem;
            `;
            
            const sendButton = document.createElement('div');
            sendButton.style.cssText = `
                width: 36px; height: 36px;
                background: linear-gradient(135deg, #4285F4 0%, #34A853 100%);
                border-radius: 50%; display: flex; align-items: center; justify-content: center;
                color: white; font-size: 1.2rem; cursor: pointer; transition: transform 0.2s ease;
            `;
            sendButton.innerHTML = 'â†’';
            
            inputArea.appendChild(input);
            inputArea.appendChild(sendButton);
            chatBody.appendChild(messagesContainer);
            chatBody.appendChild(inputArea);
            chatWindow.appendChild(chatHeader);
            chatWindow.appendChild(chatBody);
            canvas.appendChild(chatWindow);
            
            setTimeout(() => { chatWindow.style.transform = 'translate(-50%, -50%) scale(1)'; }, 100);
            
            const prompts = {
                'AI composing personalized emails': 'Write a professional follow-up email to our clients',
                'AI analyzing and updating spreadsheet': 'Process this data and update the analysis column',
                'AI processing documents from Drive': 'Summarize the main points from this document',
                'AI analyzing spreadsheet data': 'Analyze this data and find key insights',
            };
            
            const userPrompt = prompts[visualization.description] || 'Help me automate this task';
            
            setTimeout(() => {
                let charIndex = 0;
                const typeInterval = setInterval(() => {
                    if (charIndex <= userPrompt.length) {
                        input.textContent = userPrompt.substring(0, charIndex++);
                    } else {
                        clearInterval(typeInterval);
                        setTimeout(() => {
                            sendButton.style.transform = 'scale(0.9)';
                            setTimeout(() => {
                                sendButton.style.transform = 'scale(1)';
                                const userMessage = createChatMessage(userPrompt, 'user');
                                messagesContainer.appendChild(userMessage);
                                input.textContent = '';
                                const typingIndicator = createTypingIndicator();
                                messagesContainer.appendChild(typingIndicator);
                                setTimeout(() => {
                                    typingIndicator.remove();
                                    const aiResponse = getAIResponse(visualization.description);
                                    const aiMessage = createChatMessage(aiResponse, 'ai');
                                    messagesContainer.appendChild(aiMessage);
                                    const successGlow = document.createElement('div');
                                    successGlow.style.cssText = `
                                        position: absolute; top: 0; left: 0; right: 0; bottom: 0;
                                        background: radial-gradient(circle at center, rgba(52, 168, 83, 0.3), transparent);
                                        pointer-events: none; animation: pulse 1s ease;
                                    `;
                                    chatWindow.appendChild(successGlow);
                                    setTimeout(() => {
                                        chatWindow.style.transform = 'translate(-50%, -50%) scale(0)';
                                        setTimeout(() => {
                                            chatWindow.remove();
                                            callback();
                                        }, 500);
                                    }, 1500);
                                }, 1500);
                            }, 100);
                        }, 500);
                    }
                }, 30);
            }, 800);
        }
        
        function createChatMessage(text, type) {
            const message = document.createElement('div');
            message.style.cssText = `
                padding: 0.75rem 1rem; border-radius: 18px; max-width: 80%;
                font-family: 'IBM Plex Sans', Arial, sans-serif; font-size: 0.9rem; line-height: 1.4;
                animation: messageSlide 0.3s ease;
                ${type === 'user' ? `
                    background: linear-gradient(135deg, #4285F4 0%, #34A853 100%); color: white;
                    align-self: flex-end; margin-left: auto;
                ` : `
                    background: rgba(45, 45, 48, 0.8); color: #cbd5e1;
                    align-self: flex-start; border: 1px solid rgba(66, 133, 244, 0.2);
                `}
            `;
            message.textContent = text;
            return message;
        }
        
        function createTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.style.cssText = `
                padding: 0.75rem 1rem; border-radius: 18px; background: rgba(45, 45, 48, 0.8);
                border: 1px solid rgba(66, 133, 244, 0.2); align-self: flex-start;
                display: flex; gap: 0.3rem;
            `;
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.style.cssText = `
                    width: 8px; height: 8px; background: #4285F4; border-radius: 50%;
                    animation: typingDot 1.4s infinite; animation-delay: ${i * 0.2}s;
                `;
                indicator.appendChild(dot);
            }
            
            return indicator;
        }
        
        function getAIResponse(description) {
            const responses = {
                'AI composing personalized emails': 'Professional follow-up email created with personalized greeting and relevant content for each client.',
                'AI analyzing and updating spreadsheet': 'Data analysis complete. Updated 45 rows with insights and recommendations.',
                'AI processing documents from Drive': 'Document processed. Extracted 5 main points and created an executive summary.',
                'AI analyzing spreadsheet data': 'Analysis complete! Found 3 key trends and 2 anomalies in your data. Insights have been summarized.',
            };
            
            return responses[description] || 'Task completed successfully! Your data has been processed.';
        }
        
        function animateDataFlow(fromRect, toRect, canvasRect, visualization) {
            return new Promise(resolve => {
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        createMovingIcon(
                            fromRect.left - canvasRect.left + fromRect.width / 2,
                            fromRect.top - canvasRect.top + fromRect.height / 2,
                            toRect.left - canvasRect.left + toRect.width / 2,
                            toRect.top - canvasRect.top + toRect.height / 2,
                            visualization.particleIcon
                        );
                    }, i * 200);
                }
                
                setTimeout(resolve, 2000);
            });
        }
        
        function createMovingIcon(x1, y1, x2, y2, icon) {
            const particle = document.createElement('div');
            particle.style.cssText = `
                position: absolute; left: ${x1}px; top: ${y1}px;
                font-size: 24px;
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
                transform: translate(-50%, -50%); z-index: 999; pointer-events: none;
                transition: all 1.5s cubic-bezier(0.4, 0, 0.6, 1);
            `;
            particle.innerHTML = icon;
            canvas.appendChild(particle);
            
            particle.offsetHeight; // Force reflow
            
            particle.style.left = x2 + 'px';
            particle.style.top = y2 + 'px';
            particle.style.transform = 'translate(-50%, -50%) scale(0.5)';
            particle.style.opacity = '0';
            
            setTimeout(() => particle.remove(), 1500);
        }
        
        function showCompletionMessage(text, type) {
            const existingMessage = document.querySelector('.completion-message');
            if (existingMessage) existingMessage.remove();

            const message = document.createElement('div');
            message.className = 'completion-message';
            const borderColor = type === 'success' ? 'rgba(52, 168, 83, 0.5)' : 'rgba(234, 67, 53, 0.5)';
            const titleColor = type === 'success' ? '#34A853' : '#EA4335';

            message.style.cssText = `
                position: fixed; top: 50%; left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(32, 33, 36, 0.95); backdrop-filter: blur(10px);
                border: 2px solid ${borderColor};
                border-radius: 20px; padding: 2rem 3rem; text-align: center;
                z-index: 2000; animation: scaleIn 0.5s ease;
            `;
            
            let contentHTML = '';
            if (type === 'success') {
                contentHTML = `
                    <p style="color: #cbd5e1; margin-bottom: 1.5rem;">
                        Your workflow has been executed successfully.
                    </p>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button class="btn btn-secondary" onclick="this.closest('.completion-message').remove()">
                            Close
                        </button>
                        <a href="index.html#contact" class="btn btn-primary">
                            Start Your Project Now
                        </a>
                    </div>
                `;
            } else {
                contentHTML = `
                    <p style="color: #cbd5e1; margin-bottom: 1.5rem;">
                        Please add services to the canvas and connect them.
                    </p>
                    <button class="btn btn-primary" onclick="this.closest('.completion-message').remove()">
                        Close
                    </button>
                `;
            }

            message.innerHTML = `
                <h2 style="font-size: 2rem; margin-bottom: 1rem; color: ${titleColor};">
                    ${text}
                </h2>
                ${contentHTML}
            `;
            
            document.body.appendChild(message);
            
            if (type === 'error') {
                setTimeout(() => {
                    const msg = document.querySelector('.completion-message');
                    if(msg) msg.remove();
                }, 5000);
            }
        }

        // --- Add Keyframes and Initializations ---
        const style = document.createElement('style');
        style.textContent = `
            @keyframes drawPath { to { stroke-dashoffset: 0; } }
            @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
            @keyframes fadeIn { from { opacity: 0; transform: translateX(-50%) translateY(10px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }
            @keyframes messageSlide { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
            @keyframes typingDot { 0%, 60%, 100% { transform: translateY(0); opacity: 0.7; } 30% { transform: translateY(-10px); opacity: 1; } }
            @keyframes scaleIn { from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; } to { transform: translate(-50%, -50%) scale(1); opacity: 1; } }
        `;
        document.head.appendChild(style);

        function updateNavOffset() {
            const nav = document.querySelector('nav');
            if (nav) {
                const navHeight = nav.offsetHeight;
                document.documentElement.style.setProperty('--nav-height', navHeight + 'px');
            }
        }

        window.addEventListener('load', updateNavOffset);
        window.addEventListener('resize', updateNavOffset);

        // Initialize on load
        createParticles();
    </script>
    
<script src="nav.js" defer></script>
</body>
</html>
