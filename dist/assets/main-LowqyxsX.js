import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as h}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";const f={apiKey:"AIzaSyBDv0d_OVQsHzD_biFpkMvFrXaZguCYG58",authDomain:"automationbymeir.firebaseapp.com",projectId:"automationbymeir",storageBucket:"automationbymeir.firebasestorage.app",messagingSenderId:"216703427811",appId:"1:216703427811:web:a2c848833870a1415c91d6",measurementId:"G-D8GQDGVR08"};h(f);const u="https://script.google.com/macros/s/AKfycbzYDJcrt8eT52qSQJf6sQ842LyUNjZQm-DGLaM_g757DDdC0viqZSgAyUilmOmxgJ_Cyw/exec",y=document.getElementById("step1"),p=document.getElementById("step2"),v=document.getElementById("toStep2"),L=document.getElementById("toStep1"),i=document.getElementById("projectForm"),r=document.getElementById("submitBtn"),g=document.getElementById("slotsLoader"),l=document.getElementById("timeSlots"),o=document.getElementById("form-message");let d=null;v.addEventListener("click",()=>{i.checkValidity()?(y.classList.remove("active"),p.classList.add("active"),b()):i.reportValidity()});L.addEventListener("click",()=>{p.classList.remove("active"),y.classList.add("active")});async function b(){g.style.display="block",l.innerHTML="";try{const t=await(await fetch(u)).json();if(t.success)S(t.slots);else throw new Error(t.error||"Failed to load slots.")}catch(e){console.error("Error fetching slots:",e),l.innerHTML='<p style="color: var(--danger);">Could not load available times. Please try again later.</p>'}finally{g.style.display="none"}}function S(e){if(e.length===0){l.innerHTML='<p style="color: var(--light);">No available slots in the next 7 days. Please check back later.</p>';return}const t=e.reduce((s,a)=>{const c=new Date(a).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"});return s[c]||(s[c]=[]),s[c].push(a),s},{});let n="";for(const s in t)n+=`<div style="grid-column: 1 / -1;"><h4 style="color: var(--accent); margin-top: 1rem;">${s}</h4></div>`,t[s].forEach(a=>{const m=new Date(a).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1,timeZoneName:"short"});n+=`<div class="time-slot" data-value="${a}">${m}</div>`});l.innerHTML=n}l.addEventListener("click",e=>{e.target.classList.contains("time-slot")&&(document.querySelectorAll(".time-slot").forEach(t=>t.classList.remove("selected")),e.target.classList.add("selected"),d=e.target.dataset.value)});i.addEventListener("submit",async e=>{if(e.preventDefault(),!d){alert("Please select a time slot.");return}r.disabled=!0,r.textContent="Scheduling...";const t=new FormData(i),n={name:t.get("name"),email:t.get("email"),details:t.get("details"),dateTime:d,lang:"en"};try{await fetch(u,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i.style.display="none",o.style.display="block",o.className="success",o.innerHTML="<h3>Thank You!</h3><p>Your meeting is scheduled. A confirmation email has been sent to you.</p>"}catch(s){console.error("Error submitting form:",s),o.style.display="block",o.className="error",o.innerHTML="<h3>Error</h3><p>Something went wrong. Please try again or contact me directly.</p>",r.disabled=!1,r.textContent="Submit & Schedule"}});const E=document.getElementById("navToggle"),w=document.querySelector(".nav-links");E.addEventListener("click",()=>{w.classList.toggle("show")});window.addEventListener("scroll",()=>{const e=document.getElementById("navbar");window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")});
